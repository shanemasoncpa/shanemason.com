---
interface Props {
  href?: string;
  title: string;
  description?: string;
  image?: string;
  meta?: string;
  tags?: string[];
  external?: boolean;
}

const { href, title, description, image, meta, tags = [], external = false } = Astro.props;

const Tag = href ? 'a' : 'div';
const linkProps = href ? { href, target: external ? '_blank' : undefined, rel: external ? 'noopener noreferrer' : undefined } : {};
---

<Tag {...linkProps} class={`card block group ${href ? 'cursor-pointer' : ''}`}>
  {image && (
    <div class="aspect-video overflow-hidden rounded-sm mb-4 -mx-6 -mt-6 bg-primary-100">
      <img 
        src={image} 
        alt={title}
        class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
        loading="lazy"
      />
    </div>
  )}
  
  {meta && (
    <p class="text-sm text-primary-500 mb-2">{meta}</p>
  )}
  
  <h3 class="text-xl font-semibold mb-2 group-hover:text-accent-600 transition-colors">
    {title}
    {external && (
      <svg class="inline-block w-4 h-4 ml-1 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
      </svg>
    )}
  </h3>
  
  {description && (
    <p class="text-primary-600 line-clamp-3">{description}</p>
  )}
  
  {tags.length > 0 && (
    <div class="flex flex-wrap gap-2 mt-4">
      {tags.map(tag => (
        <span class="px-2 py-1 text-xs bg-primary-100 text-primary-600 rounded-full">
          {tag}
        </span>
      ))}
    </div>
  )}
</Tag>

<style>
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>

